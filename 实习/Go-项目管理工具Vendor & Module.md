# Go-项目管理工具Vendor & Module

> ​		需求就是：go不能和Java一样，隔离环境，也就是一个classpath的环境，Java每个项目都有独立的classpath，而go所有的项目本地环境只有一个GoPath（虽然一些开发工具可以进行隔离），使得对于不同项目的隔离不好，比如公司的项目的使用一个框架是1.1的版本，而我们本地拉取的是1.2的版本，使得开发的时候会收到版本不一致的问题。

### 1. go build

> ​	go build 相关的命令

| 标记名称 | 标记描述                                                     |
| -------- | ------------------------------------------------------------ |
| -a       | 强行对所有涉及到的代码包（包含标准库中的代码包）进行重新构建，即使它们已经是最新的了。 |
| -n       | 打印编译期间所用到的其它命令，但是并不真正执行它们。         |
| -p n     | 指定编译过程中执行各任务的并行数量（确切地说应该是并发数量）。在默认情况下，该数量等于CPU的逻辑核数。但是在`darwin/arm`平台（即iPhone和iPad所用的平台）下，该数量默认是`1`。 |
| -race    | 开启竞态条件的检测。不过此标记目前仅在`linux/amd64`、`freebsd/amd64`、`darwin/amd64`和`windows/amd64`平台下受到支持。 |
| -v       | 打印出那些被编译的代码包的名字。                             |
| -work    | 打印出编译时生成的临时工作目录的路径，并在编译结束时保留它。在默认情况下，编译结束时会删除该目录。 |
| -x       | 打印编译期间所用到的其它命令。注意它与`-n`标记的区别。       |



## gopath / go的项目结构

go的项目，所有的项目结构都是依赖于gopath目录，默认可以使用 go -env进行查看， 但是我们的项目可能随时迁移可能不是用的系统的gopath ， 因此需要我们自定义。 

所以我们的项目可以认为就是一个go 完整的项目， 根据GitHub上Go项目的推荐结构， 大致上可以看一下，[https://github.com/golang-standards/project-layout](https://github.com/golang-standards/project-layout)， 其基准就是在src目录下，

- `src`存放源代码(比如：.go .c .h .s等)  按照golang默认约定，go run，go install等命令的当前工作路径（即在此路径下执行上述命令）。
- `pkg`编译时生成的中间文件（比如：.a）　　golang编译包时
- `bin`编译后生成的可执行文件（为了方便，可以把此目录加入到 $PATH 变量中，如果有多个gopath，那么使用`${GOPATH//://bin:}/bin`添加所有的bin目录）

cmd目录， 放入我们的main程序， 

bin目录为，gobin目录

internal 目录为内部目录，这是您不希望其他人在其应用程序或库中导入的代码.

想city项目就是一个标准的目录结构，而ebike-factory-api是一个畸形的，src下，只有api，全部都放在里面。

vendor 目录不管放在哪， 只要是在src下面就行了， 默认都是放在src下的一级或者二级目录， 项目中全部放在二级目录下， 



## build

其实就是export 一下你的gopath 和 gobin ， 然后build， 最后再复原





## Go vendor

其实就是go项目的一种约定，在1.5以后出现的，会自动找gopath中vendor目录



## go module

这个是go 1.11添加的，这个我也没看明白，其实就是更加使用方便了吧，完全抛弃了gopath，