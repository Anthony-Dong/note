# 系统的看待一下Netty

> ​	前几天写了个Netty项目 , 但是项目并没有对Netty 有太过于深刻的了解. 也是不断地想问题, 不断的查找问题. 
>
> ​	看了极客时间的一期视频查漏补全 . 发现Netty的整体设计,, 让初学者有个大体的框架体系. 

这里我就拿Netty的包来说吧 , 主要分几块 , 我这里只展示一个图, 我日常如果可以设置版本我都是

4.1.36.FIANL 版本. 其他组件加入来的, 可以看看. 

![](https://tyut.oss-accelerate.aliyuncs.com/image/2020-30-33/e339242c-0cd7-4090-b2b7-75823968bff2.png?x-oss-process=style/template01)

这个使用率是很高的. 各种框架都在使用,  想过为什么吗, 难道真的是编程模型好. 好用吗, 我觉得并不是.  我觉得是框架本身做了太多的事情. 

​	好比Spring一样, Spring多年的发展得益于Spring快速基于他的基本思想拓展出很多的框架. 这也是Netty给我们提供的.



​	那提供了什么 ?   一下使他的目录表. 

```java
2019/04/30  19:48    <DIR>          .
2019/04/30  19:48    <DIR>          ..
2019/04/30  19:48    <DIR>          bootstrap
2019/04/30  19:48    <DIR>          buffer
2019/04/30  19:48    <DIR>          channel
2019/04/30  17:11    <DIR>          handler
2019/04/11  21:06    <DIR>          internal
2019/04/30  19:48    <DIR>          resolver
2019/04/30  19:48    <DIR>          util
```



### BootStrap

​	顾明思议启动器.  他是启动程序唯一的入口. 



### buffer

​	传输的载体, 基于ByteBuffer加以封装 , 提供了比Bytebuf更合理的实现,  如果知道Bytebuffer  的话, 他的操作. 他的内存管理, 其实系统并没有提供一个恰当的实现,  比如Bytebuffer的回收, 不是特别合理. Netty都考虑到这些, 实现了自己的一套. 其实大部分操作都是基于unsafe类的. 

​	提供了高效率的传输对象

### channel

每一个连接都会对应一个channel对象。 他就是连接的载体。  这里提供了4种实现， OIO ， NIO ， Epoll  ，AIO 。四种实现， 可以面对不同环境进行最优的选择。 

比如流量控制的实现， 就是基于chanel， 关闭读写事件， 也就是selector取消了监听。 不回去拉去。

### handler

其实这个就是Netty的核心。 他核心部分就是这部分。 我们看看他又那些。 

提供的功能如下 

```java
2019/04/30  19:48    <DIR>          address
2019/04/30  19:48    <DIR>          codec
2019/04/30  19:48    <DIR>          flow
2019/04/30  19:48    <DIR>          flush
2019/04/30  19:48    <DIR>          ipfilter
2019/04/30  19:48    <DIR>          logging
2019/04/30  19:48    <DIR>          proxy
2019/04/30  19:48    <DIR>          ssl
2019/04/30  19:48    <DIR>          stream
2019/04/30  19:48    <DIR>          timeout
2019/04/30  19:48    <DIR>          traffic
```

如果你对于Netty有三分的了解， 我觉得你会懂这些， 但是不一定看过这全部内容。 





我们看看核心的 codec 部分。  这就是他的全部 。 他帮助开发者已经实现了这么多种的实现 。 所以对于我们来说可以快速的使用，

```java
2019/04/30  19:48    <DIR>          rtsp
2019/04/30  19:48    <DIR>          sctp
2019/04/30  19:48    <DIR>          serialization
2019/04/30  19:48    <DIR>          smtp
2019/04/30  19:48    <DIR>          socks
2019/04/30  19:48    <DIR>          socksx
2019/04/30  19:48    <DIR>          spdy
2019/04/30  19:48    <DIR>          stomp
2019/04/30  19:48    <DIR>          string
2019/04/30  19:48    <DIR>          redis
2019/04/30  19:48    <DIR>          mqtt
2019/04/30  19:48    <DIR>          http
2019/04/30  19:48    <DIR>          http2
2019/04/30  19:48    <DIR>          json
2019/04/30  19:48    <DIR>          haproxy
2019/04/30  19:48    <DIR>          dns
2019/04/30  19:48    <DIR>          base64
2019/04/30  19:48    <DIR>          bytes
```

我举个例子， 一个http服务端， 你可能会自己实现编解码机制吗。 一个mqtt协议， 一个mq协议， 再比如未来的http2.0 等等 ， smtp协议， 等等都实现了。 



所以大家学习Netty的目的就是了解其运行机制， 只有了解运行机制， 你才可以合理的使用， 细节到每一个地方， 每一个方法。



我觉得未来某一天Java会从API层面整合Netty作为核心库。 

